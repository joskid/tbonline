{% load url from future %}
{% load comments %}
{% load i18n %}

{% get_comment_count for post as comment_count %}
{% if comment_count > 0 %}
<p class="comment-meta">Comments in chronological order</p>
{% endif %}

{% get_comment_list for post as comment_list %}
{% for comment in comment_list %}
<div class="comment">
	<p class="author"><strong>{{ comment.user_name }}</strong> wrote on {{ comment.submit_date }}</p>
	<p>{{ comment.comment }}</p>
</div>
{% endfor %}

{% if comments_allowed == 'true' %}
    <p id="invite-comment">{% trans "Please leave a comment." %}</p>
    {% render_comment_form for post %}
{% endif %}        


{% if comments_allowed == "authenticate" %}
    <p>
    {% trans "Please" %}
    <a href="{% url 'django.contrib.auth.views.login' %}?next={{post.get_absolute_url}}%23comment_form">
    {% trans "login" %}</a>
    {% trans "or" %}
    <a href="{% url 'registration.views.register' %}?next={{post.get_absolute_url}}%23comment_form">            
    {% trans "register" %}</a>
    {% trans "to comment" %}.
    </p>
{% endif %}

{% if comments_allowed == 'closed' %}
    <p>{% trans "This article is closed for comments" %}.</p>
{% endif %}


