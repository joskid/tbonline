{% load url from future %}
{% load comments %}
{% load i18n %}

<div id="comment-heading">

{% get_comment_count for post as comment_count %}

{% if comment_count > 0 %}
    <h2>{% trans "Comments in chronological order" %}</h2>
{% endif %}
</div> 

{% render_comment_list for post %}

{% if comments_allowed == 'true' %}
    <p id="invite-comment">{% trans "Please leave a comment." %}</p>
    {% render_comment_form for post %}
{% endif %}        


{% if comments_allowed == "authenticate" %}
    <p>
    {% trans "Please" %}
    <a href="{% url 'django.contrib.auth.views.login' %}?next={{post.get_absolute_url}}%23comment_form">
    {% trans "login" %}</a>
    {% trans "or" %}
    <a href="{% url 'registration.views.register' %}?next={{post.get_absolute_url}}%23comment_form">            
    {% trans "register" %}</a>
    {% trans "to comment" %}.
    </p>
{% endif %}

{% if comments_allowed == 'closed' %}
    <p>
    {% trans "This article is closed for comments" %}
    </p>
{% endif %}


